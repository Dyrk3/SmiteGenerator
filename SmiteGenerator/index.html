<html>

<head>
  <title>Smite Build Generator</title>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.js" integrity="sha256-fNXJFIlca05BIO2Y5zh1xrShK3ME+/lYZ0j+ChxX2DA="
    crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" rel="stylesheet">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="index.css">
  <script src="index.js"></script>
</head>


<body>

  <header>
    <h1 style="text-align: center;">Smite Build Generator</h1>
  </header>
  <main>
    <form id="god_selector">
      <div class="row">
        <div class="six columns">
          <label for="god_list">God:</label>
          <select id="god_list" name="god_list" class="u-full-width">
            <option>Achilles</option>
            <option>Agni</option>
            <option>Ah Muzen Cab</option>
            <option>Ah Puch</option>
            <option>Amaterasu</option>
            <option>Anhur</option>
            <option>Anubis</option>
            <option>Ao Kuang</option>
            <option>Aphrodite</option>
            <option>Apollo</option>
            <option>Arachne</option>
            <option>Ares</option>
            <option>Artemis</option>
            <option>Arthur</option>
            <option>Artio</option>
            <option>Athena</option>
            <option>Awilix</option>
            <option>Bacchus</option>
            <option>Bakasura</option>
            <option>Baron Samedi</option>
            <option>Bastet</option>
            <option>Bellona</option>
            <option>Cabrakan</option>
            <option>Camazotz</option>
            <option>Cerberus</option>
            <option>Cernunnos</option>
            <option>Chaac</option>
            <option>Chang'e</option>
            <option>Chernobog</option>
            <option>Chiron</option>
            <option>Chronos</option>
            <option>Cu Chulainn</option>
            <option>Cupid</option>
            <option>Da Ji</option>
            <option>Discordia</option>
            <option>Erlang Shen</option>
            <option>Fafnir</option>
            <option>Fenrir</option>
            <option>Freya</option>
            <option>Ganesha</option>
            <option>Geb</option>
            <option>Guan Yu</option>
            <option>Hachiman</option>
            <option>Hades</option>
            <option>He Bo</option>
            <option>Hel</option>
            <option>Hera</option>
            <option>Hercules</option>
            <option>Hou Yi</option>
            <option>Hun Batz</option>
            <option>Isis</option>
            <option>Izanami</option>
            <option>Janus</option>
            <option>Jing Wei</option>
            <option>Kali</option>
            <option>Khepri</option>
            <option>Kukulkan</option>
            <option>Kumbhakarna</option>
            <option>Kuzenbo</option>
            <option>Loki</option>
            <option>Medusa</option>
            <option>Mercury</option>
            <option>Ne Zha</option>
            <option>Neith</option>
            <option>Nemesis</option>
            <option>Nike</option>
            <option>Nox</option>
            <option>Nu Wa</option>
            <option>Odin</option>
            <option>Osiris</option>
            <option>Pele</option>
            <option>Poseidon</option>
            <option>Ra</option>
            <option>Raijin</option>
            <option>Rama</option>
            <option>Ratatoskr</option>
            <option>Ravana</option>
            <option>Scylla</option>
            <option>Serqet</option>
            <option>Skadi</option>
            <option>Sobek</option>
            <option>Sol</option>
            <option>Sun Wukong</option>
            <option>Susano</option>
            <option>Sylvanus</option>
            <option>Terra</option>
            <option>Thanatos</option>
            <option>The Morrigan</option>
            <option>Thor</option>
            <option>Thoth</option>
            <option>Tyr</option>
            <option>Ullr</option>
            <option>Vamana</option>
            <option>Vulcan</option>
            <option>Xbalanque</option>
            <option>Xing Tian</option>
            <option>Ymir</option>
            <option>Zeus</option>
            <option>Zhong Kui</option>
          </select>
        </div>

        <div class="six columns">
          <label for="mode_list">Gamemode:</label>
          <select id="mode_list" name="mode_list" class="u-full-width">
            <option>Conquest</option>
            <option>Arena</option>
            <option>Assault</option>
            <option>Joust</option>
            <option>Siege</option>
            <option>Clash</option>
            <option>Duel</option>
          </select>
        </div>
      </div>
      <button id="submit" type="button" class="button button-primary u-full-width">Roll</button>
    </form>
  </main>

  <div class="container" style="margin: 0 auto; width: 75%;">
    <ul class="unstyled" id="items1">

    </ul>
    <ul class="unstyled" id="items2">

    </ul>
    <ul class="unstyled" id="items3">

    </ul>
  </div>

  <script>
    assassains = ['Arachne', 'Awilix', 'Bakasura', 'Bastet', 'Camazotz', 'Da Ji', 'Fenrir', 'Hun Batz', 'Kali', 'Loki', 'Mercury', 'Ne Zha', 'Nemesis', 'Pele', 'Ratatoskr', 'Ravana', 'Serqet', 'Susano', 'Thanatos', 'Thor']
    guardians = ['Ares', 'Artio', 'Athena', 'Bacchus', 'Cabrakan', 'Cerberus', 'Fafnir', 'Ganesha', 'Geb', 'Khepri', 'Kumbhakarna', 'Kuzenbo', 'Sobek', 'Sylvanus', 'Terra', 'Xing Tian', 'Ymir']
    mages = ['Agni', 'Ah Puch', 'Anubis', 'Ao Kuang', 'Aphrodite', 'Baron Samedi', "Chang'e", 'Chronos', 'Discordia', 'Freya', 'Hades', 'He Bo', 'Hel', 'Hera', 'Isis', 'Janus', 'Kukulkan', 'Nox', 'Nu Wa', 'Poseidon', 'Ra', 'Raijin', 'Scylla', 'Sol', 'The Morrigan', 'Thoth', 'Vulcan', 'Zeus', 'Zhong Kui']
    warriors = ['Achilles', 'Amaterasu', 'Bellona', 'Chaac', 'Cu Chulainn', 'Erlang Shen', 'Guan Yu', 'Hercules', 'King Arthur', 'Nike', 'Odin', 'Osiris', 'Sun Wukong', 'Tyr', 'Vamana']
    hunters = ['Ah Muzen Cab', 'Anhur', 'Apollo', 'Artemis', 'Cernunnos', 'Chernobog', 'Chiron', 'Cupid', 'Hachiman', 'Hou Yi', 'Izanami', 'Jing Wei', 'Medusa', 'Neith']
    relics = ['Purification Beads', 'Heavenly Wings', 'Blink Rune', 'Cursed Ankh', 'Meditation Cloak', 'Phantom Veil', 'Aegis Amulet', 'Magic Shell', 'Sundering Spear', 'Teleport Glyph', 'Shield of Thorns', 'Horrific Emblem', 'Bracer of Undoing', 'Belt of Frenzy']
    consumables = ['Potion of Magical Might', 'Potion of Physical Might', 'Healing Potion', 'Mana Potion', 'Ward', 'Elixir of Power', 'Elixir of Defense', 'Sentry Ward', 'Multi Potion', 'Chalice of Healing', 'Chalice of Mana', 'Chalice of the Oracle']
    basic_items = ["Oni Hunter's Garb", "Genji's Guard", 'Breastplate of Valor', 'Mantle of Discord', 'Spirit Robe', 'Witchblade', "Shogun's Kusari", 'Spectral Armor', 'Relic Dagger', 'Shield of Regrowth', 'Hide of the Urchin', "Emperor's Armor", "Magi's Cloak", 'Stone of Gaia', 'Pestilence', 'Winged Blade', 'Bulwark of Hope', 'Sovereignty', 'Mail of Renewal', 'Heartward Amulet', 'Gauntlet of Thebes', 'Midgardian Mail', 'Hide of the Nemean Lion', 'Mystical Mail', 'Talisman of Energy']
    physical_items = ["Odysseus' Bow", 'Toxic Blade', 'Asi', 'Ninja Tabi', 'Reinforced Greaves', 'Talaria Boots', 'Warrior Tabi', 'Ancile', "Atalanta's Bow", "Berserker's Shield", 'Blackthorn Hammer', 'Bloodforge', "Brawler's Beat Stick", 'Deathbringer', "Devourer's Gauntlet", 'Frostbound Hammer', "Gladiator's Shield", 'Heartseeker', "Hydra's Lament", 'Ichaival', "Jotunn's Wrath", 'Malice', 'Poisoned Star', "Qin's Sais", 'Rage', 'Runeforged Hammer', 'Runic Shield', "Shifter's Shield", 'Silverbranch Bow', 'Soul Eater', 'The Crusher', 'The Executioner', "Titan's Bane", 'Transcendence', 'Void Shield', 'Wind Demon']
    physical_melee = ['Masamune', 'Golden Blade', 'Hastened Katana', 'Stone Cutting Sword']
    magical_items = ["Bancroft's Talon", 'Book of the Dead', 'Book of Thoth', 'Celestial Legion Helm', "Chronos' Pendant", 'Demonic Grip', 'Divine Ruin', 'Doom Orb', 'Dynasty Plate Helm', 'Ethereal Staff', 'Gem of Isolation', 'Hastened Ring', "Jade Emperor's Crown", 'Lotus Crown', 'Obsidian Shard', 'Polynomicon', "Pythagorem's Piece", 'Rod of Asclepius', 'Rod of Tahuti', "Shaman's Ring", 'Soul Gem', 'Soul Reaver', 'Spear of Desolation', 'Spear of the Magus', 'Stone of Binding', 'Stone of Fal', 'Telkhines Ring', "Typhon's Fang", 'Void Stone', "Warlock's Staff"]
    ratatoskr_items = ['Acorn of Yggdrasil']
    barons_consumables = ['Baron\'s Brew']
    general_masks = ["Bumba's Mask"]
    warrior_guardian_mask = ["Rangda's Mask"]
    mage_hunter_assassain_mask = ["Lono's Mask"]
    blessings = ["Attacker's Blessing", "Defender's Blessing", "Specialist's Blessing"]
    conquest_blessings = ["Assassin's Blessing", "Guardian's Blessing", "Hunter's Blessing", "Warrior's Blessing", "Mage's Blessing"]

    // image sizes in string form
    const IMG_SIZES = '128px';
    const IMG_PADDING = '4px';

    //TODO: clear lists at end???
    $("#submit").click(function () {
      selected_god = $("#god_list option:selected").text();
      selected_mode = $("#mode_list option:selected").text();
      selected_consumables = consumables;
      selected_relics = relics;
      selected_blessings = conquest_blessings;
      selected_items = basic_items;
      selected_items = selected_items.concat(general_masks);

      if (selected_mode !== "Conquest") {
        selected_blessings = selected_blessings.concat(blessings);
      }

      if (selected_god === "Baron Samedi") {
        selected_consumables = selected_consumables.concat(barons_consumables);
      } else if (selected_god === "Ratatoskr") {
        selected_items = selected_items.concat(ratatoskr_items);
      }

      if (assassains.includes(selected_god)) {
        selected_items = selected_items.concat(physical_items);
        selected_items = selected_items.concat(physical_melee);
        selected_items = selected_items.concat(mage_hunter_assassain_mask);
      }

      if (guardians.includes(selected_god)) {
        selected_items = selected_items.concat(magical_items);
        selected_items = selected_items.concat(warrior_guardian_mask);
      }

      if (mages.includes(selected_god)) {
        selected_items = selected_items.concat(magical_items);
        selected_items = selected_items.concat(mage_hunter_assassain_mask);
      }

      if (warriors.includes(selected_god)) {
        selected_items = selected_items.concat(physical_items);
        selected_items = selected_items.concat(physical_melee);
        selected_items = selected_items.concat(warrior_guardian_mask);
      }

      if (hunters.includes(selected_god)) {
        selected_items = selected_items.concat(mage_hunter_assassain_mask);
        selected_items = selected_items.concat(physical_items);
      }



      shuffle(selected_blessings);
      shuffle(selected_items);
      shuffle(selected_consumables);
      shuffle(selected_relics);


      // get elements
      const items1Element = document.querySelector('#items1');
      const items2Element = document.querySelector('#items2');
      const items3Element = document.querySelector('#items3');

      // clear out lists
      items1Element.innerHTML = '';
      items2Element.innerHTML = '';
      items3Element.innerHTML = '';

      // Add the random blessing to the list
      const blessingElement = document.createElement('li');
      append_img_with_loading(get_pic(selected_blessings[0]), blessingElement);
      items1Element.appendChild(blessingElement);

      // add 6 items to the list
      const itemListElement = document.createElement('li');
      for (let i = 0; i <= 5; i++) {
        let img = get_pic(selected_items[i]);
        append_img_with_loading(img, itemListElement);
      }
      // create the li and add the inner html
      items1Element.appendChild(itemListElement);

      // add 2 consumables to list
      const consumableListElement = document.createElement('li');
      for (let i = 0; i <= 1; i++) {
        let img = get_pic(selected_consumables[i]);
        append_img_with_loading(img, consumableListElement);
      }
      items2Element.appendChild(consumableListElement);

      // add 2 relics to list
      const relicListElement = document.createElement('li');
      for (let i = 0; i <= 1; i++) {
        let img = get_pic(selected_relics[i]);
        append_img_with_loading(img, relicListElement);
      }
      items3Element.appendChild(relicListElement);

    });

    function shuffle(a) {
      var j, x, i;
      for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
      }
      return a;
    }

    function append_img_with_loading(imgElement, parentElement) {
      let loading = document.createElement('img');
      loading.src = 'loading.gif';

      // configure sizes of images
      loading.style.width = IMG_SIZES;
      loading.style.height = IMG_SIZES;
      imgElement.style.width = IMG_SIZES;
      imgElement.style.height = IMG_SIZES;
      loading.style.paddingRight = IMG_PADDING;
      imgElement.style.paddingRight = IMG_PADDING;

      // hide image until it's loaded
      imgElement.style.display = 'none';

      // add both images to parent
      parentElement.appendChild(loading);
      parentElement.appendChild(imgElement);

      // draw loading image until real image is loaded
      imgElement.addEventListener('load', event => {
        loading.style.display = 'none';
        imgElement.style.display = '';
      });
    }

    function get_pic(item_name) {
      const itemImg = document.createElement('img');
      if (selected_blessings.includes(item_name)) {
        item_name = item_name.replace(/ /g, '');
        item_name = item_name.replace('\'', '');
        itemImg.src = "https://d1u5p3l4wpay3k.cloudfront.net/smite_gamepedia/c/ca/" + item_name + "_T1.png";
      } else {
        item_name = item_name.toLowerCase();
        item_name = item_name.replace(/ /g, '-');
        item_name = item_name.replace('\'', '');
        itemImg.src = "https://web2.hirez.com/smite/item-icons/" + item_name + ".jpg";
      }
      return itemImg;
    }

    function get_blessing_pic(item_name) {

    }
  </script>
</body>


</html>